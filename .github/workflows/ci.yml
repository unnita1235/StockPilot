name: CI

on:
  push:
      branches: [main, master, develop]
        pull_request:
            branches: [main, master, develop]

            jobs:
              lint-and-typecheck:
                  name: Lint & Type Check
                      runs-on: ubuntu-latest
                          steps:
                                - uses: actions/checkout@v4
                                      - uses: actions/setup-node@v4
                                              with:
                                                        node-version: '18'
                                                                  cache: 'npm'
                                                                        - run: npm ci
                                                                              - run: npm run lint
                                                                                    - run: npm run typecheck

                                                                                      build:
                                                                                          name: Build
                                                                                              runs-on: ubuntu-latest
                                                                                                  steps:
                                                                                                        - uses: actions/checkout@v4
                                                                                                              - uses: actions/setup-node@v4
                                                                                                                      with:
                                                                                                                                node-version: '18'
                                                                                                                                          cache: 'npm'
                                                                                                                                                - run: npm ci
                                                                                                                                                      - working-directory: ./server
                                                                                                                                                              run: npm ci
                                                                                                                                                                    - run: npm run build
                                                                                                                                                                            env:
                                                                                                                                                                                      NEXT_PUBLIC_API_URL: http://localhost:3001/api
